{
    "$schema": "https://docs.renovatebot.com/renovate-schema.json",
    "extends": ["config:recommended"],
    "branchPrefix": "renovate/",
    "baseBranches": ["main", "rhoai-2.16", "rhoai-2.19", "rhoai-2.21", "rhoai-2.22", "rhoai-2.25", "rhoai-3.0", "rhoai-3.2"],
    "ignoreTests": true,
    "automergeType": "pr",
    "automerge": true,
    "prHourlyLimit": 0,
    "enabledManagers": ["dockerfile", "rpm", "custom.regex"],
    "packageRules": [
      {
        "matchManagers": ["dockerfile"],
        "matchBaseBranches": ["main", "rhoai-2.16", "rhoai-2.19", "rhoai-2.21", "rhoai-2.22", "rhoai-2.25", "rhoai-3.0", "rhoai-3.2"],
        "matchUpdateTypes": ["digest"],
        "matchFileNames": ["*Dockerfile.konflux*"],
        "enabled": true,
        "ignoreTests": true,
        "automergeType": "pr",
        "automerge": true,
        "groupName": "Dockerfile Digest Updates",
        "branchPrefix": "renovate/docker-main/",
        "semanticCommits": "enabled"
      },
      {
        "matchManagers": ["rpm"],
        "matchBaseBranches": ["main", "rhoai-2.16", "rhoai-2.19", "rhoai-2.21", "rhoai-2.22", "rhoai-2.25", "rhoai-3.0", "rhoai-3.2"],
        "groupName": "RPM Updates",
        "commitMessageTopic": "RPM updates",
        "enabled": true,
        "schedule": ["at any time"],
        "branchPrefix": "renovate/rpm/",
       "semanticCommits": "enabled"
      },
      {
        "matchManagers": ["rpm"],
        "matchBaseBranches": ["rhoai-2.21"],
        "enabled": false
      },
      {
        "matchManagers": ["custom.regex"],
        "matchBaseBranches": ["main", "rhoai-3.2"],
        "groupName": "Base Image Updates",
        "commitMessageTopic": "Base image updates",
        "enabled": true,
        "schedule": ["at any time"],
        "branchPrefix": "renovate/base-image/",
        "semanticCommits": "enabled",
        "automerge": true
      }
    ],
    "dockerfile": {
      "enabled": true,
      "schedule": ["at any time"],
      "additionalBranchPrefix": "{{baseBranch}}/",
      "branchPrefix": "konflux/mintmaker/",
      "ignoreTests": true,
      "automergeType": "pr",
      "automerge": true,
      "packageRules": [
        {
          "matchUpdateTypes": [
            "major",
            "minor",
            "pin",
            "pinDigest",
            "patch",
            "bump"
          ],
          "enabled": false
        }
      ],
      "ignorePaths": [
        "**/Dockerfile",
        "!**/Dockerfile.konflux*"
      ],
      "pinDigests": true
    },
    "rpm": {
      "enabled": true,   
      "schedule": ["at any time"]
    },
    "customManagers": [
      {
        "customType": "regex",
        "fileMatch": ["^konflux/.*\\.conf$"],
        "matchStrings": [
          "BASE_IMAGE=(?<depName>[^:]+):(?<currentValue>[^\\s@]+)(@(?<currentDigest>sha256:[a-f0-9]+))?"
        ],
        "datasourceTemplate": "docker",
        "versioningTemplate": "loose"
      }
    ]
  }